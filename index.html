<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pizzeria ‚Äî Commander & Distributeurs</title>
<link rel="preconnect" href="https://unpkg.com" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
<style>
:root{--bg:#0c0c0c;--txt:#111;--white:#fff;--green:#1D4935;--accent:#28a745;--radius:28px;--shadow:0 10px 30px rgba(0,0,0,.25)}
*{box-sizing:border-box}html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
a{color:inherit;text-decoration:none}
.container{width:100%;max-width:1100px;margin:0 auto;padding:24px}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:16px 22px;border-radius:999px;border:3px solid #e6f0e9;background:#fff;box-shadow:var(--shadow);font-weight:700;transition:transform .06s ease,box-shadow .2s ease}
.btn:hover{transform:translateY(-1px)}
.btn-primary{border-color:#dfeee6}
.btn-outline{background:#fff;border-color:#dfeee6}
.section{padding:64px 0}
.hero{min-height:88vh;display:grid;place-items:center;color:#fff;background:url('https://images.unsplash.com/photo-1541599540903-216a46ca1dc0?q=80&w=1974&auto=format&fit=crop') center/cover fixed;position:relative}
.hero::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.45),rgba(0,0,0,.55))}
.hero .inner{position:relative;z-index:1;text-align:center;padding:24px}
h1{font-size:clamp(36px,6vw,64px);margin:0 0 16px 0;color:#fff;font-weight:900;letter-spacing:.5px}
.hero-cta{margin-top:24px;display:flex;gap:16px;flex-wrap:wrap;justify-content:center}
.card{background:rgba(20,30,24,.8);backdrop-filter:blur(8px);border-radius:24px;padding:20px 20px 10px;box-shadow:var(--shadow);color:#eef4ef;max-width:760px;margin:20px auto;border:1px solid rgba(255,255,255,.12)}
.card label{display:block;font-weight:700;letter-spacing:.6px;margin:0 0 8px 8px}
.select{width:100%;padding:12px 14px;border-radius:10px;border:2px solid #cfe3d6;background:#f8fff9}
.order{display:grid;gap:16px;max-width:680px;margin:0 auto}
.order .platform{display:flex;align-items:center;justify-content:center;padding:18px 24px;border-radius:999px;background:#fff;border:4px solid #dfeee6;box-shadow:var(--shadow);font-size:22px;font-weight:800}
.order .platform em{font-style:normal;color:#33c24d}
.order .platform .logo{height:22px;margin-right:10px}
.map-wrap{max-width:1100px;margin:0 auto}
#map{height:520px;border-radius:20px;box-shadow:var(--shadow);border:1px solid #e4e4e4}
.map-actions{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0}
.badge{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;background:#fff;border:2px solid #e6f0e9;font-weight:700}
.footer{padding:36px 0;color:#666;border-top:1px solid #eee;text-align:center}
@media (max-width:640px){.hero{min-height:78vh}.order .platform{font-size:18px}}
</style>
</head>
<body>

<!-- HERO -->
<header class="hero">
  <div class="inner container">
    <h1>Trouvez votre restaurant</h1>

    <!-- S√©lecteur ville (facultatif pour filtrer liens) -->
    <div class="card">
      <label for="city">S√©lectionnez votre ville</label>
      <select id="city" class="select">
        <option value="tarbes" selected>Tarbes</option>
        <option value="semeac">S√©m√©ac</option>
        <option value="lourdes">Lourdes</option>
      </select>
    </div>

    <div class="hero-cta">
      <a href="#commander" class="btn btn-primary">üçï Commander</a>
      <a href="#map" class="btn btn-outline">üìç Voir les distributeurs</a>
    </div>
  </div>
</header>

<!-- BLOC COMMANDE (Uber/Deliveroo) -->
<section id="commander" class="section">
  <div class="container">
    <div class="order">
      <a id="link-uber" class="platform" href="https://www.ubereats.com/fr" target="_blank" rel="noopener">
        Uber&nbsp;<em>Eats</em>
      </a>
      <a id="link-deliveroo" class="platform" href="https://deliveroo.fr/" target="_blank" rel="noopener">
        <img class="logo" src="https://upload.wikimedia.org/wikipedia/commons/6/6b/Deliveroo_logo_%282016%29.svg" alt="Deliveroo"> deliveroo
      </a>
    </div>
  </div>
</section>

<!-- CARTE DES DISTRIBUTEURS -->
<section class="section" aria-label="Distributeurs">
  <div class="container map-wrap">
    <div class="map-actions">
      <button id="nearest" class="badge">üìç Le plus proche de moi</button>
      <div class="badge">üß≠ Astuce : pince/zoom pour explorer</div>
    </div>
    <div id="map"></div>
  </div>
</section>

<footer class="footer">
  <div class="container">¬© Pizzeria ‚Äî pizzas artisanales ‚Ä¢ OpenStreetMap + Leaflet</div>
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script>
// 1) Liens plateformes par ville (remplace par tes URLs pr√©cises Uber/Deliveroo)
const LINKS_BY_CITY={
  tarbes:{uber:"https://www.ubereats.com/fr/city/tarbes",deliveroo:"https://deliveroo.fr/menu/tarbes"},
  semeac:{uber:"https://www.ubereats.com/fr/city/semeac",deliveroo:"https://deliveroo.fr/menu/semeac"},
  lourdes:{uber:"https://www.ubereats.com/fr/city/lourdes",deliveroo:"https://deliveroo.fr/menu/lourdes"}
};
const cityEl=document.getElementById('city'), uberEl=document.getElementById('link-uber'), delivEl=document.getElementById('link-deliveroo');
function updateLinks(){const c=cityEl.value; if(LINKS_BY_CITY[c]){uberEl.href=LINKS_BY_CITY[c].uber; delivEl.href=LINKS_BY_CITY[c].deliveroo;}}
cityEl.addEventListener('change',updateLinks); updateLinks();

// 2) Donn√©es distributeurs (AJOUTE/REMPLACE par tes points r√©els)
const LOCATIONS=[
  {name:"Distributeur ‚Äî Tarbes Sport",lat:43.2236,lng:0.0760,address:"111 Av. des Sports, S√©m√©ac"},
  {name:"Distributeur ‚Äî Centre Tarbes",lat:43.2321,lng:0.0730,address:"Centre-ville, Tarbes"},
  {name:"Distributeur ‚Äî Lourdes Nord",lat:43.1209,lng:-0.0482,address:"Lourdes"}
];

// 3) Init carte
const map=L.map('map',{scrollWheelZoom:true}).setView([43.226,0.07],12);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'¬© OpenStreetMap'}).addTo(map);

const markers=[];
LOCATIONS.forEach(p=>{
  const m=L.marker([p.lat,p.lng]).addTo(map).bindPopup(`<strong>${p.name}</strong><br>${p.address||""}`);
  markers.push({...p,marker:m});
});

// 4) Trouver le plus proche via g√©olocalisation
function haversine(a,b){const R=6371e3;const toRad=g=>g*Math.PI/180;const dLat=toRad(b.lat-a.lat),dLng=toRad(b.lng-a.lng);const lat1=toRad(a.lat),lat2=toRad(b.lat);const s=Math.sin(dLat/2)**2+Math.cos(lat1)*Math.cos(lat2)*Math.sin(dLng/2)**2;return 2*R*Math.asin(Math.sqrt(s));}
document.getElementById('nearest').addEventListener('click',()=>{
  if(!navigator.geolocation){alert("G√©olocalisation non disponible.");return;}
  navigator.geolocation.getCurrentPosition(pos=>{
    const you={lat:pos.coords.latitude,lng:pos.coords.longitude};
    let best=null;
    markers.forEach(p=>{const d=haversine(you,{lat:p.lat,lng:p.lng}); if(!best||d<best.d){best={p,d};}});
    if(best){map.setView([best.p.lat,best.p.lng],15); best.p.marker.openPopup();}
  },err=>{alert("Impossible d'obtenir votre position.");},{enableHighAccuracy:true,timeout:8000});
});
</script>
</body>
</html>
